<h3>Felhasználók kezelése</h3>

<table class="table table-striped">
    <thead>
        <tr>
            <th>#</th>
            <th>Név</th>
            <th>Email</th>
            <th>Lakcim</th>
            <th>Státusz</th>
            <th>Műveletek</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let user of pagedUsers; index as i">
            <td>{{i+1}}</td>
            <td>{{user.name}}</td>
            <td>{{user.email}}</td>
            <td>{{user.address}}</td>
            <td>{{user.status ? 'Aktív' : 'Inaktív'}}</td>
            <td>
                <button type="button" (click)="getUserInfo(user.id)" class="btn btn-info mx-2"  data-bs-toggle="modal" data-bs-target="#exampleModal"><i class="bi bi-info-circle"></i></button>
                <button *ngIf="user.id != loggedUser.id" (click)="statusChange(user.id)" class="btn btn-danger"><i class="bi bi-ban"></i></button>
            </td>
        </tr>
    </tbody>
</table>

<nav aria-label="Page navigation example">
    <ul class="pagination">
        <li class="page-item"><a class="page-link" (click)="setPage(currentPage-1)"
                [class.disabled]="currentPage == 1">Previous</a></li>

        <li class="page-item" *ngFor="let page of [].constructor(totalPages); index as i">
            <a class="page-link" (click)="setPage(i+1)" [class.active]="currentPage == i + 1">{{i+1}}</a>
        </li>

        <li class="page-item"><a class="page-link" (click)="setPage(currentPage+1)"
                [class.disabled]="currentPage == totalPages">Next</a></li>
    </ul>
</nav>

<!-- Modal -->
<div class="modal modal-xl fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">{{selectedUser.name}} adatai</h1>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                      <button class="nav-link active" id="userinfo-tab" data-bs-toggle="tab" data-bs-target="#userinfo-tab-pane" type="button" role="tab" aria-controls="userinfo-tab-pane" aria-selected="true">Felhasználói adatok</button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="orders-tab" data-bs-toggle="tab" data-bs-target="#orders-tab-pane" type="button" role="tab" aria-controls="orders-tab-pane" aria-selected="false">Rendelések</button>
                    </li>
                  </ul>
                  <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="userinfo-tab-pane" role="tabpanel" aria-labelledby="userinfo-tab" tabindex="0">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>Név:</td>
                                    <td>{{selectedUser.name}}</td>
                                </tr>
                                <tr>
                                    <td>Email:</td>
                                    <td>{{selectedUser.email}}</td>
                                </tr>
                                <tr *ngIf="selectedUser.address">
                                    <td>Lakcím:</td>
                                    <td>{{selectedUser.address}}</td>
                                </tr>
                                <tr *ngIf="selectedUser.phone">
                                    <td>Telefon:</td>
                                    <td>{{selectedUser.phone}}</td>
                                </tr>
                                <tr>
                                    <td>ID:</td>
                                    <td>{{selectedUser.id}}</td>
                                </tr>
                                <tr *ngIf="selectedUser.reg">
                                    <td>Regisztráció:</td>
                                    <td>{{selectedUser.reg}}</td>
                                </tr>
                                <tr *ngIf="selectedUser.last">
                                    <td>Utolsó belépés:</td>
                                    <td>{{selectedUser.last}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="orders-tab-pane" role="tabpanel" aria-labelledby="orders-tab" tabindex="0">
                        <table class="table table-bordered">
                            <tbody>
                                <tr *ngFor="let order of orders; let i = index">
                                    <td>{{i+1}}</td>
                                    <td>{{order.status}}</td>
                                    <td>{{order.createdAt}}</td>
                                    <td>{{order.name}}</td>
                                    <td>{{order.total}} Ft</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                  
                  </div>
            </div>
            <div class="modal-footer">
                <button type="button" (click)="clearSelectedUser()" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>